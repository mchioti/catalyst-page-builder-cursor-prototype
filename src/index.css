@import "tailwindcss";
@import "./styles/journal-themes.css";
@import "./styles/branding-system.css";
@import "./foundation/styles/button.css";

/* Tailwind v4 preflight replacement to ensure base layout isn't broken */
*, *::before, *::after { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; }

/* Prevent auto-scroll behavior that causes unwanted scrolling */
* {
  scroll-behavior: auto !important;
  scroll-padding-top: 0 !important;
  scroll-margin-top: 0 !important;
}


/* App base tokens */
:root {
  --brand: 30 64 175;
  --bg: 249 250 251;
}

html, body, #root { height: 100%; }
body { @apply bg-[rgb(var(--bg))] text-gray-900 antialiased; }
.panel { @apply bg-white border border-gray-200 rounded-lg shadow-sm; }
.muted { @apply text-gray-600; }

/* Theme-aware component styles */
.theme-provider {
  font-family: var(--theme-font-family);
  color: var(--theme-color-text);
  background-color: var(--theme-color-background);
}

.theme-heading {
  font-family: var(--theme-heading-font-family);
  color: var(--theme-color-text);
  font-weight: 700;
}

.theme-heading.theme-h1 { font-size: var(--theme-font-size-4xl); }
.theme-heading.theme-h2 { font-size: var(--theme-font-size-3xl); }
.theme-heading.theme-h3 { font-size: var(--theme-font-size-2xl); }
.theme-heading.theme-h4 { font-size: var(--theme-font-size-xl); }
.theme-heading.theme-h5 { font-size: var(--theme-font-size-lg); }
.theme-heading.theme-h6 { font-size: var(--theme-font-size-base); }

.theme-text {
  font-family: var(--theme-font-family);
  color: var(--theme-color-text);
  font-size: var(--theme-font-size-base);
}

.theme-text-secondary {
  color: var(--theme-color-text-secondary);
}

.theme-surface {
  background-color: var(--theme-color-surface);
  border: 1px solid var(--theme-color-border);
  border-radius: var(--theme-border-radius-md);
}

.theme-button-primary {
  background-color: var(--theme-color-primary);
  color: white;
  padding: var(--theme-spacing-sm) var(--theme-spacing-md);
  border-radius: var(--theme-border-radius-md);
  font-family: var(--theme-font-family);
  font-weight: 500;
  font-size: var(--theme-font-size-sm);
  border: none;
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.theme-button-primary:hover {
  opacity: 0.9;
}

.theme-button-secondary {
  background-color: transparent;
  color: var(--theme-color-primary);
  border: 1px solid var(--theme-color-primary);
  padding: var(--theme-spacing-sm) var(--theme-spacing-md);
  border-radius: var(--theme-border-radius-md);
  font-family: var(--theme-font-family);
  font-weight: 500;
  font-size: var(--theme-font-size-sm);
  cursor: pointer;
  transition: all 0.2s ease;
}

.theme-button-secondary:hover {
  background-color: var(--theme-color-primary);
  color: white;
}

.theme-card {
  background-color: var(--theme-color-surface);
  border: 1px solid var(--theme-color-border);
  border-radius: var(--theme-border-radius-lg);
  padding: var(--theme-spacing-lg);
}

.theme-input {
  background-color: var(--theme-color-background);
  border: 1px solid var(--theme-color-border);
  border-radius: var(--theme-border-radius-md);
  padding: var(--theme-spacing-sm) var(--theme-spacing-md);
  font-family: var(--theme-font-family);
  font-size: var(--theme-font-size-base);
  color: var(--theme-color-text);
}

.theme-input:focus {
  outline: none;
  border-color: var(--theme-color-accent);
  box-shadow: 0 0 0 2px var(--theme-color-accent)20;
}

.theme-link {
  color: var(--theme-color-primary);
  text-decoration: none;
  transition: color 0.2s ease;
}

.theme-link:hover {
  color: var(--theme-color-accent);
}

/* ============================================
   RESPONSIVE SECTION UTILITIES
   ============================================ */

/* Reduce section padding on mobile */
@media (max-width: 640px) {
  [data-section-id] {
    /* Reduce horizontal padding on mobile */
    padding-left: max(1rem, env(safe-area-inset-left)) !important;
    padding-right: max(1rem, env(safe-area-inset-right)) !important;
  }
  
  /* Reduce vertical padding slightly on mobile */
  [data-section-id][style*="padding:"] {
    /* Only reduce if using large padding values */
  }
}

/* Responsive typography for headings */
@media (max-width: 640px) {
  .typo-heading-h1 {
    font-size: clamp(2rem, 8vw, var(--heading-h1-size, 3rem)) !important;
  }
  .typo-heading-h2 {
    font-size: clamp(1.5rem, 6vw, var(--heading-h2-size, 2rem)) !important;
  }
}

/* Ensure images don't overflow on mobile */
@media (max-width: 640px) {
  [data-widget-type="image"] img {
    max-width: 100%;
    height: auto;
  }
}

/* Stack publication cards vertically on mobile */
@media (max-width: 640px) {
  [data-widget-type="publication-list"] > div {
    flex-direction: column !important;
  }
}

/* Reset grid spans on mobile - all widgets become 1x1 */
@media (max-width: 640px) {
  [data-widget-type] {
    grid-column: span 1 !important;
    grid-row: span 1 !important;
  }
}
